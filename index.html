<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>LIÈGE BY NIGHT</title>
<style>
body{margin:0;background:#0a0f0a;color:#0f8;font-family:"Courier New",monospace;}
header{padding:20px;border-bottom:1px solid #0f8;text-align:center;font-weight:bold;letter-spacing:2px;}
nav{display:flex;justify-content:space-around;border-bottom:1px solid #0f8;padding:10px;}
nav button{background:none;border:1px solid #0f8;color:#0f8;padding:5px 10px;cursor:pointer;}
nav button:hover{background:#033;}
section{display:none;padding:20px;}
section.active{display:block;}
.box{border:1px solid #0f8;padding:15px;margin-bottom:20px;}
.locked{color:#044;}
.status-good{color:#0f8;}
.status-warn{color:#fa0;}
.status-alert{color:#f44;}
textarea,input{width:100%;background:#000;color:#0f8;border:1px solid #0f8;padding:5px;}
.character summary,.enquete summary{padding:10px;cursor:pointer;display:flex;align-items:center;border:1px solid #0f8;border-radius:5px;background:#010;color:#0f8;position:relative;}
.character summary:hover,.enquete summary:hover{background:#022;}
.char-meta,.enq-meta{position:absolute;right:25px;}
.arrow{position:absolute;right:5px;transition:transform .3s;}
details[open] .arrow{transform:rotate(90deg);}
.character-content,.enquete-content{max-height:0;overflow:hidden;transition:max-height .3s ease;padding:10px;border-left:1px solid #0f8;border-right:1px solid #0f8;border-bottom:1px solid #0f8;}
details[open] .character-content,details[open] .enquete-content{max-height:1000px;}
.char-meta.status-good,.enq-meta.status-good{color:#0f8;}
.char-meta.status-warn,.enq-meta.status-warn{color:#fa0;}
.char-meta.status-alert,.enq-meta.status-alert{color:#f44;}
ul{padding-left:20px;margin:5px 0;}
</style>
</head>
<body>
<header>TERMINAL DE SUPERVISION — CONSORTIUM<br>SECTEUR : LIÈGE<br>STATUT : ACTIF</header>
<nav>
<button onclick="showSection('accueil')">Accueil</button>
<button onclick="showSection('carte')">Carte</button>
<button onclick="showSection('individus')">Dossiers individuels</button>
<button onclick="showSection('enquetes')">Dossiers d'enquêtes</button>
<button onclick="showSection('messagerie')">Messagerie</button>
<button onclick="showSection('archives')">Archives</button>
</nav>

<!-- ACCUEIL -->
<section id="accueil" class="active" style="padding:60px 20px;">
<div class="box" id="terminal-box" style="font-size:1.05em;line-height:1.6em;white-space:pre-wrap;min-height:350px;"></div>
</section>

<script>
// Terminal
const terminal=document.getElementById("terminal-box");
const now=new Date();
function pad(n){return n.toString().padStart(2,'0');}
const timestamp=pad(now.getDate())+"/"+pad(now.getMonth()+1)+"/"+now.getFullYear()+" "+pad(now.getHours())+":"+pad(now.getMinutes())+":"+pad(now.getSeconds())+"."+now.getMilliseconds().toString().padStart(3,'0')+" CET (UTC+01:00)";
function randomHex(len){let s="";const c="abcdef0123456789";for(let i=0;i<len;i++){s+=c[Math.floor(Math.random()*c.length)];}return s;}
const sessionID=randomHex(16),checksum=randomHex(64),ip=`${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,latency=12+Math.floor(Math.random()*28);
const lines=["CONSORTIUM NODE LGE-01","SYS.VERSION 3.4.12-LTS","kernel ............... 5.12.18","[BOOTSTRAP]","memory check ......... OK","integrity hash ....... "+checksum.substring(0,16),"ShreckNet modules .... loaded","boot latency ........ "+latency+"ms","[AUTH]","session id ........... "+sessionID,"client endpoint ...... "+ip,"reverse lookup ....... resolved","timestamp ............ "+timestamp,"ShreckNet sync ........ active","[READY]","Bienvenue, Censeur."];
let lineIndex=0,charIndex=0;
function typeEffect(){if(lineIndex<lines.length){if(charIndex<lines[lineIndex].length){terminal.textContent+=lines[lineIndex][charIndex];charIndex++;setTimeout(typeEffect,12);}else{terminal.textContent+="\n";lineIndex++;charIndex=0;setTimeout(typeEffect,80);}}}
typeEffect();

// Toggle sections
function showSection(id){document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));document.getElementById(id).classList.add("active");}

// Toggle personnages/enquêtes
document.querySelectorAll('details.character,details.enquete').forEach(det=>{
  const content=det.querySelector('.character-content,.enquete-content');
  det.addEventListener('toggle',()=>{content.style.maxHeight=det.open?content.scrollHeight+'px':'0';});
});
</script>

<!-- CARTE -->
<section id="carte">
<h2>Domaine de Liège</h2>
<div style="width:100%;overflow:hidden;height:512px;border:1px solid #0f8;box-sizing:border-box;">
<iframe src="https://www.google.com/maps/d/u/0/embed?mid=1cwPK7_Z1yUSMlz6z_Jw9_OSxnmGJmc0&ehbc=2E312F&noprof=1" width="100%" height="812" frameborder="0" style="margin-top:-150px;border:0;"></iframe>
</div>
<div class="box">Elysiums :
<ul>
<li>Opéra royal de Wallonie — Laure Nolveaux</li>
<li>Discothèque Champs Élysées — Karl Nassau</li>
<li>Bar Le St. Giles — Théodore Grignoux</li>
</ul>
</div>
</section>

<!-- DOSSIERS INDIVIDUELS -->

<section id="individus">
<h2>Descendants</h2>
<div style="width:100%;height:600px;border:1px solid #0f8;box-sizing:border-box;">
<iframe src="https://embed.kumu.io/130b401cf6efe888b913567541e9bbe8" width="100%" height="100%" frameborder="0" style="border:0;"></iframe>
</div>
<br>

<details class="character">
<summary><span class="char-name">Lyle Kresten</span><span class="char-meta status-good">Actif</span><span class="arrow">▶</span></summary>
<div class="character-content">
  <div class="box"><strong>Note Interne :</strong><br>Primogène Tremere et Régent</div>

  <!-- Grid scrollable -->
  <div class="box" style="max-height:500px; overflow:auto; display:grid; grid-template-columns:repeat(auto-fill, minmax(150px, 1fr)); gap:5px; padding:5px;">
    <!-- 44 images avec preview -->
    <img class="thumb" src="Lyle1.jpg" data-large="Lyle1.jpg">
    <img class="thumb" src="Lyle2.jpg" data-large="Lyle2.jpg">
    <img class="thumb" src="Lyle3.jpg" data-large="Lyle3.jpg">
    <img class="thumb" src="Lyle4.jpg" data-large="Lyle4.jpg">
    <img class="thumb" src="Lyle5.jpg" data-large="Lyle5.jpg">
    <img class="thumb" src="Lyle6.jpg" data-large="Lyle6.jpg">
    <img class="thumb" src="Lyle7.jpg" data-large="Lyle7.jpg">
    <img class="thumb" src="Lyle8.jpg" data-large="Lyle8.jpg">
    <img class="thumb" src="Lyle9.jpg" data-large="Lyle9.jpg">
    <img class="thumb" src="Lyle10.jpg" data-large="Lyle10.jpg">
    <img class="thumb" src="Lyle11.jpg" data-large="Lyle11.jpg">
    <img class="thumb" src="Lyle12.jpg" data-large="Lyle12.jpg">
    <img class="thumb" src="Lyle13.jpg" data-large="Lyle13.jpg">
    <img class="thumb" src="Lyle14.jpg" data-large="Lyle14.jpg">
    <img class="thumb" src="Lyle15.jpg" data-large="Lyle15.jpg">
    <img class="thumb" src="Lyle16.jpg" data-large="Lyle16.jpg">
    <img class="thumb" src="Lyle17.jpg" data-large="Lyle17.jpg">
    <img class="thumb" src="Lyle18.jpg" data-large="Lyle18.jpg">
    <img class="thumb" src="Lyle19.jpg" data-large="Lyle19.jpg">
    <img class="thumb" src="Lyle20.jpg" data-large="Lyle20.jpg">
    <img class="thumb" src="Lyle21.jpg" data-large="Lyle21.jpg">
    <img class="thumb" src="Lyle22.jpg" data-large="Lyle22.jpg">
    <img class="thumb" src="Lyle23.jpg" data-large="Lyle23.jpg">
    <img class="thumb" src="Lyle24.jpg" data-large="Lyle24.jpg">
    <img class="thumb" src="Lyle25.jpg" data-large="Lyle25.jpg">
    <img class="thumb" src="Lyle32.jpg" data-large="Lyle32.jpg">
    <img class="thumb" src="Lyle33.jpg" data-large="Lyle33.jpg">
    <img class="thumb" src="Lyle34.jpg" data-large="Lyle34.jpg">
    <img class="thumb" src="Lyle35.jpg" data-large="Lyle35.jpg">
    <img class="thumb" src="Lyle36.jpg" data-large="Lyle36.jpg">
    <img class="thumb" src="Lyle37.jpg" data-large="Lyle37.jpg">
    <img class="thumb" src="Lyle38.jpg" data-large="Lyle38.jpg">
    <img class="thumb" src="Lyle39.jpg" data-large="Lyle39.jpg">
	<img class="thumb" src="Lyle26.jpg" data-large="Lyle26.jpg">
    <img class="thumb" src="Lyle27.jpg" data-large="Lyle27.jpg">
    <img class="thumb" src="Lyle28.jpg" data-large="Lyle28.jpg">
    <img class="thumb" src="Lyle29.jpg" data-large="Lyle29.jpg">
    <img class="thumb" src="Lyle30.jpg" data-large="Lyle30.jpg">
    <img class="thumb" src="Lyle31.jpg" data-large="Lyle31.jpg">
    <img class="thumb" src="Lyle40.jpg" data-large="Lyle40.jpg">
    <img class="thumb" src="Lyle41.jpg" data-large="Lyle41.jpg">
    <img class="thumb" src="Lyle42.jpg" data-large="Lyle42.jpg">
    <img class="thumb" src="Lyle43.jpg" data-large="Lyle43.jpg">
    <img class="thumb" src="Lyle44.jpg" data-large="Lyle44.jpg">
  </div>
</div>
</details>

<!-- Lightbox overlay -->
<div id="lightboxOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; justify-content:center; align-items:center;">
  <img id="lightboxImage" style="max-width:90%; max-height:90%; object-fit:contain;">
</div>

<script>
// Initialisation Lightbox
const thumbs = document.querySelectorAll('.thumb');
const overlay = document.getElementById('lightboxOverlay');
const lightboxImage = document.getElementById('lightboxImage');

thumbs.forEach(img => {
  img.style.cursor = 'pointer';
  img.style.width = '100%';
  img.style.height = '150px';
  img.style.objectFit = 'cover';
  img.style.objectPosition = 'top';

  img.addEventListener('click', () => {
    lightboxImage.src = img.dataset.large;
    overlay.style.display = 'flex';
  });
});

// Fermer en cliquant sur le fond
overlay.addEventListener('click', (e) => {
  if(e.target === overlay){
    overlay.style.display = 'none';
  }
});
</script>

</section>

<!-- ENQUÊTES -->
<section id="enquetes">
<h2>Dossiers d'enquête</h2>
<details class="enquete">
<summary><span class="enq-title">Affaire Degrelle</span><span class="enq-meta status-good">Statut : Classée</span><span class="arrow">▶</span></summary>
<div class="enquete-content box">
<p>En 2000, la disparition de Sandrine Leroy a déclenché une enquête menée par Laure Nolveaux et Lambert.<br>
Rapidement, une cellule du Sabbat a été repérée dans le repaire de Robert Degrelle, qui les aidait activement.<br>
Lambert a dirigé l’assaut final : le nid a été détruit et tous ses membres éliminés.<br>
Robert Degrelle a été jugé sur place pour haute trahison et exécuté par Lambert.<br>
Un allié Nosfératu de Degrelle, Heudebert, a disparu la même nuit.<br>
Les lieux utilisés par le Sabbat ont été rasés pour garantir la Mascarade et effacer toute trace.</p>
</div>
</details>
<br>
<details class="enquete">
<summary><span class="enq-title">Attaque de l'Opéra</span><span class="enq-meta status-warn">Statut : Ouverte</span><span class="arrow">▶</span></summary>
<div class="enquete-content box">
<p>Lors d'un rassemblement à l'Élysée de l'Opéra Royal, le Sabbat a lancé une attaque brutale et coordonnée.<br>
Les clans Brujah et Gangrel ont tenu la ligne de front, subissant de lourdes pertes pour protéger la cité.<br>
L'artillerie sorcière du clan Tremere a détruit les assaillants restants, et Lambert a traqué les fuyards avec des Brujah survivants.<br>
Pour préserver la Mascarade, l'incident a été couvert comme une attaque terroriste. Deux mortels ont été sélectionnés pour confesser les crimes et sont en détention.</p>
<p><strong>Bilan des pertes :</strong></p>
<ul><li>Tania</li><li>Léon</li><li>Walter</li><li>Paul Gravier</li><li>Marie Jourdan</li><li>Térence</li><li>Luc</li><li>Annabelle Vicomte</li><li>Thomas Durieux</li></ul>
<p>Tous les assaillants connus ont été éliminés.</p>
</div>
</details>
</section>

<!-- MESSAGERIE -->
<section id="messagerie">
<h2>Messagerie interne</h2>
<div id="messages"></div>
<div class="box">
<strong>Nouveau message :</strong><br>
<input type="text" id="username" placeholder="Votre nom"><br><br>
<input type="text" id="sujet" placeholder="Sujet"><br><br>
<textarea id="message" placeholder="Rédiger message..."></textarea><br><br>
<button onclick="envoyerMessage()">Envoyer</button>
</div>
</section>

<!-- ARCHIVES -->
<section id="archives">
<h2>Archives</h2>
<div class="box">
<h3>Chronologie</h3>
???? — Childéric, Alterec, et Clotilde se succèdent à la tête de la ville<br>
1453 — Hélène de Chantraine devient Princesse de Liège<br>
1493 — La Camarilla est créée à la Convention d'Épines<br>
16XX — Liège rejoint la Camarilla<br>
1793 — Hélène de Chantraine meurt pendant la seconde restauration autrichienne<br>
1814 — Madeleine d’Aurigny devient Marquise de Liège pendant les guerres napoléoniennes, la ville se soumet à Paris<br>
1830 — Le Consortium est créé<br>
1915 — Jean Gosuin devient Prince de Liège pendant la première guerre mondiale, la ville rejoint le Consortium<br>
1939 — Tarcisus devient Prince de Liège pendant la seconde guerre mondiale<br>
1945 — Jean Gosuin redevient Prince de Liège pendant la libération<br>
1965 — Fondation du Club des Femmes Immortelles par Tania<br>
1972 — Arrivée du clan Giovanni à Liège<br>
1991 — Signature du traité de non-agression avec les Lupins locaux, négocié par Chriss<br>
1998 — Les Giovanni quittent Liège<br>
1999 — Les Gangrel quittent la Camarilla<br>
2000 — Affaire Degrelle<br>
09/01/2008 — Raid du Sabbat à l'Opéra Royal<br>
</div>
<div class="box"><h3>Calendrier Opérationnel</h3><ul><li>12/03 — RdV avec Lambert</li></ul></div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyBfrvYyWwrqNC7GuO1Km63wRgIfxtuUGBU",
authDomain:"liege-by-night.firebaseapp.com",
projectId:"liege-by-night",
storageBucket:"liege-by-night.firebasestorage.app",
messagingSenderId:"453217467536",
appId:"1:453217467536:web:2ada4ada4a549bf0482c15",
measurementId:"G-6ERWP95WGM"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

// Envoyer message
window.envoyerMessage=async function(){
const u=document.getElementById("username"),s=document.getElementById("sujet"),m=document.getElementById("message");
const username=u.value.trim()||"Anonyme",sujet=s.value.trim(),message=m.value.trim();
if(!sujet||!message)return;
await addDoc(collection(db,"messages"),{expediteur:username,sujet:sujet,contenu:message,date:new Date()});
u.value="";s.value="";m.value="";
};

// Charger messages temps réel
function chargerMessages(){
const container=document.getElementById("messages");
const q=query(collection(db,"messages"),orderBy("date","desc"));
onSnapshot(q,snap=>{container.innerHTML="";snap.forEach(doc=>{const data=doc.data();const box=document.createElement("div");box.className="box";box.innerHTML=`<strong>Expéditeur :</strong> ${data.expediteur}<br><strong>Sujet :</strong> ${data.sujet}<p>${data.contenu}</p>`;container.appendChild(box);});});
}
chargerMessages();
</script>
</body>
</html>